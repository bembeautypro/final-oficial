Perfeito. Separei 6 comandos prontos para você colar no chat do Replit, cada um focado em um ganho específico (SEO, Schema, OG, rastreamento cross‑domain, Web Vitals → Supabase, Service Worker/cache, Segurança).
Cole um bloco por vez. Eles não exigem que você abra código manualmente.

⸻

1) SEO + Schema JSON‑LD (Website, Organization, Product)

Aplique as seguintes mudanças no projeto:

1) No arquivo principal de HTML (index.html), dentro de <head>, insira (sem duplicar tags existentes):
<link rel="canonical" href="https://nivela.bembeauty.com.br/">
<link rel="alternate" hreflang="pt-br" href="https://nivela.bembeauty.com.br/">

2) Ainda no <head>, adicione o bloco JSON-LD abaixo (como novo <script type="application/ld+json">):
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebSite",
      "name": "NIVELA® - Bem Beauty Professional",
      "url": "https://nivela.bembeauty.com.br/",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://nivela.bembeauty.com.br/?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    },
    {
      "@type": "Organization",
      "name": "Bem Beauty Professional",
      "url": "https://bembeauty.com.br",
      "logo": "https://fdyzlqovxvdpkzlwuhjj.supabase.co/storage/v1/object/public/imagens/logo-bembeauty-transparente.png",
      "sameAs": [
        "https://www.instagram.com/bembeautyprofessional",
        "https://www.youtube.com/@BemBeautyProfessional"
      ]
    },
    {
      "@type": "Product",
      "name": "NIVELA®",
      "brand": "Bem Beauty Professional",
      "description": "Retexturizador profissional sem formol, com tecnologia patenteada e ativos da Amazônia, rendimento 30% superior.",
      "image": "https://fdyzlqovxvdpkzlwuhjj.supabase.co/storage/v1/object/public/imagens/frasco-nivela-destaque.webp",
      "url": "https://nivela.bembeauty.com.br/"
    }
  ]
}
</script>


⸻

2) Open Graph/Twitter + Favicons/Manifest consolidados

Padronize metatags sociais e favicon. No <head> do index.html, adicione/ajuste:

<!-- Open Graph / Twitter -->
<meta property="og:title" content="NIVELA® - A Evolução da Escova Progressiva Profissional">
<meta property="og:description" content="Descubra NIVELA — desenvolvido com tecnologia patenteada, sem formol, com ativos da Amazônia e rendimento 30% superior.">
<meta property="og:url" content="https://nivela.bembeauty.com.br/">
<meta property="og:image" content="https://fdyzlqovxvdpkzlwuhjj.supabase.co/storage/v1/object/public/imagens/frasco-nivela-destaque.webp">
<meta property="og:type" content="website">
<meta name="twitter:card" content="summary_large_image">

<!-- Favicons / Manifest -->
<link rel="icon" href="https://fdyzlqovxvdpkzlwuhjj.supabase.co/storage/v1/object/public/favicon/favicon.ico">
<link rel="apple-touch-icon" href="https://fdyzlqovxvdpkzlwuhjj.supabase.co/storage/v1/object/public/favicon/apple-touch-icon.png">
<link rel="manifest" href="https://fdyzlqovxvdpkzlwuhjj.supabase.co/storage/v1/object/public/favicon/site.webmanifest">
<meta name="theme-color" content="#0D181C">


⸻

3) GA4 via GTM com cross‑domain (bembeauty.com.br) + UTM clean

No index.html (head), configurar GTM/GA4 com defer e linker de domínio:

1) Adicionar logo após a abertura de <head> (antes de outros scripts):
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments)}
  // Consent default
  gtag('consent','default',{ad_storage:'denied',analytics_storage:'granted'});
  // GA4 config com cross-domain (ajuste a tag no GTM para ler estas opções)
  window.GA4_CONFIG = {
    linker: { domains: ['bembeauty.com.br'] },
    allow_google_signals: false
  };
</script>
<script defer src="https://www.googletagmanager.com/gtm.js?id=GTM-KZW3RTWD"></script>

2) No clique do botão "ACESSAR LOJA OFICIAL", preservar UTMs:
- Certifique-se de que o href contém utms (ex.: utm_source=landing&utm_medium=cta&utm_campaign=nivela_lp).
- Se já há script adicionando UTMs automaticamente, manter como está e não duplicar.


⸻

4) Web Vitals → Supabase (coleta automática no front, sem servidor extra)

Implemente coleta de Web Vitals direto do navegador para a tabela 'performance_metrics' no Supabase.

1) No index.html, antes de </body>, adicione:
<script type="module">
  import { onLCP, onFCP, onCLS, onTTFB, onINP } from 'https://unpkg.com/web-vitals@3/dist/web-vitals.attribution.js?module';

  const SUPABASE_URL = 'https://fdyzlqovxvdpkzlwuhjj.supabase.co';
  const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZkeXpscW92eHZkcGt6bHd1aGpqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1MjQwNzIsImV4cCI6MjA3MDEwMDA3Mn0.0itJku2mVxd8MIvk7lo7Y8gamram_QYCluzHbNUT88Y';

  const send = (metric) => {
    const payload = {
      created_at: new Date().toISOString(),
      page: location.pathname,
      name: metric.name,
      value: metric.value,
      id: metric.id,
      url: location.href,
      device: 'mobile'
    };
    fetch(`${SUPABASE_URL}/rest/v1/performance_metrics`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'apikey': SUPABASE_ANON_KEY,
        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,
        'Prefer': 'return=representation'
      },
      body: JSON.stringify(payload)
    }).catch(()=>{});
  };

  onLCP(send); onFCP(send); onCLS(send); onTTFB(send); onINP(send);
</script>

2) Garanta que a tabela 'performance_metrics' no Supabase aceita inserts com as colunas:
(created_at timestamptz, page text, name text, value float8, id text, url text, device text).
Caso alguma coluna não exista, me avise que eu te mando o SQL.


⸻

5) Service Worker leve (cache estático + SWR para imagens)

Crie um Service Worker simples para acelerar navegação recorrente:

1) Na raiz do projeto, crie um arquivo 'public/sw.js' com:
const STATIC_CACHE = 'nivela-static-v1';
const STATIC_ASSETS = [
  '/',
  '/index.html',
  '/assets/index.css'
];
self.addEventListener('install', (e) => {
  e.waitUntil(caches.open(STATIC_CACHE).then((c) => c.addAll(STATIC_ASSETS)));
});
self.addEventListener('fetch', (e) => {
  const url = new URL(e.request.url);
  // SWR para imagens
  if (url.pathname.match(/\.(png|jpe?g|webp|avif|svg)$/)) {
    e.respondWith((async () => {
      const cache = await caches.open(STATIC_CACHE);
      const cached = await cache.match(e.request);
      const fetchPromise = fetch(e.request).then((res) => { cache.put(e.request, res.clone()); return res; });
      return cached || fetchPromise;
    })());
    return;
  }
  // Cache-first para estáticos mínimos
  if (STATIC_ASSETS.includes(url.pathname)) {
    e.respondWith(caches.match(e.request).then((res)=>res||fetch(e.request)));
  }
});

2) No index.html, registre o SW (antes de </body>):
<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js').catch(()=>{});
}
</script>


⸻

6) Segurança: CSP no header + HSTS + www→root

Aplique cabeçalhos no servidor para segurança e consistência de domínio:

1) No servidor (Express): adicionar middleware de headers (se já existe, apenas atualizar):
// server/security-headers.js (ou no index do server)
export default function securityHeaders(req, res, next) {
  res.setHeader('Content-Security-Policy',
    "default-src 'self' https://*.supabase.co https://www.googletagmanager.com https://www.google-analytics.com; " +
    "img-src 'self' data: https://*.supabase.co; " +
    "script-src 'self' 'unsafe-inline' https://www.googletagmanager.com; " +
    "style-src 'self' 'unsafe-inline'; font-src 'self' data:; frame-ancestors 'self';");
  res.setHeader('Strict-Transport-Security', 'max-age=31536000; includeSubDomains; preload');
  res.setHeader('Referrer-Policy', 'strict-origin-when-cross-origin');
  res.setHeader('X-Content-Type-Options', 'nosniff');
  res.setHeader('X-Frame-Options', 'SAMEORIGIN');
  next();
}

2) Importar e usar no server:
import securityHeaders from './server/security-headers.js';
app.use(securityHeaders);

3) Redirecionar 'www' para raíz (se aplicável no próprio app):
app.use((req,res,next)=>{
  if (req.headers.host && req.headers.host.startsWith('www.')) {
    return res.redirect(301, `https://${req.headers.host.replace(/^www\./,'')}${req.url}`);
  }
  next();
});


⸻

Quer mais dois extras?
	•	Teste A/B de Title/Description (troca automática conforme origem — Instagram/WhatsApp)
	•	Botão CTA com data-gtm-event="cta_acessar_loja" e rel="noopener" + target="_blank"

Se quiser, te mando um comando único para instalar esses dois extras também (A/B + CTA rastreável).